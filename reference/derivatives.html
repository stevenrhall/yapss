
<!DOCTYPE html>

<html class="writer-html5" data-content_root="../" lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Derivatives — YAPSS 0.1.1.dev0</title>
<link href="../_static/pygments.css?v=77553476" rel="stylesheet" type="text/css"/>
<link href="../_static/css/theme.css?v=e59714d7" rel="stylesheet" type="text/css"/>
<link href="../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css" rel="stylesheet" type="text/css"/>
<script src="../_static/jquery.js?v=5d32c60e"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
<script src="../_static/documentation_options.js?v=091d38aa"></script>
<script src="../_static/doctools.js?v=9a2dae69"></script>
<script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
<script src="../_static/clipboard.min.js?v=a7894cd8"></script>
<script src="../_static/copybutton.js?v=35a8b989"></script>
<script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script src="../_static/js/theme.js"></script>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="user_derivatives.html" rel="next" title="User-Defined Derivatives"/>
<link href="guess.html" rel="prev" title="Initial Guess"/>
</head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../index.html">
            YAPSS
          </a>
<div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div><div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/tutorial.html">Tutorial Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="problem.html">Problem Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="callbacks.html">Callback Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="bounds.html">Setting Bounds</a></li>
<li class="toctree-l1"><a class="reference internal" href="guess.html">Initial Guess</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Derivatives</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-derivatives-method-attribute">The <code class="docutils literal notranslate"><span class="pre">derivatives.method</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-derivatives-order-attribute">The <code class="docutils literal notranslate"><span class="pre">derivatives.order</span></code> Attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#derivatives-class-reference"><code class="docutils literal notranslate"><span class="pre">Derivatives</span></code> Class Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#yapss._private.problem.Derivatives"><code class="docutils literal notranslate"><span class="pre">Derivatives</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#yapss._private.problem.Derivatives.method"><code class="docutils literal notranslate"><span class="pre">Derivatives.method</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#yapss._private.problem.Derivatives.order"><code class="docutils literal notranslate"><span class="pre">Derivatives.order</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_derivatives.html">User-Defined Derivatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="scaling.html">Scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh_structure.html">Mesh Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipopt_options.html">Ipopt Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="solution.html">The Solution Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuring the Ipopt Binary Source</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/index.html">JupyterLab Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">Python Scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing to YAPSS</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../index.html">YAPSS</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Home" class="icon icon-home" href="../index.html"></a></li>
<li class="breadcrumb-item active">Derivatives</li>
<li class="wy-breadcrumbs-aside">
<a class="fa fa-github" href="https://github.com/stevenrhall/yapss/blob/main/docs/user_guide/reference/derivatives.rst"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="derivatives">
<h1>Derivatives<a class="headerlink" href="#derivatives" title="Link to this heading"></a></h1>
<p>Users have a choice of how YAPSS calculates derivatives required for the solution of the
optimal control problem. The <code class="docutils literal notranslate"><span class="pre">derivatives</span></code> attribute of a <a class="reference internal" href="problem.html#yapss.Problem" title="yapss.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a> optimal control
problem object controls how derivatives are calculated.</p>
<section id="the-derivatives-method-attribute">
<h2>The <code class="docutils literal notranslate"><span class="pre">derivatives.method</span></code> Attribute<a class="headerlink" href="#the-derivatives-method-attribute" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">derivatives.method</span></code> option can take on one of four values:</p>
<ul class="simple">
<li><p>“auto” (default), for automatic differentiation using the casadi package.</p></li>
<li><p>“central-difference” or “central-difference-full”, for derivatives calculated using central
difference techniques. For the “central-difference” method, the sparsity pattern of the
derivatives is found automatically, by passing numerical arguments to the user-defined
callback functions that include the <code class="docutils literal notranslate"><span class="pre">nan</span></code> (not a number) floating point value in specific
elements of the decision variable arrays. The <code class="docutils literal notranslate"><span class="pre">nan</span></code> values propagate through the calculations
and can be used to determine the sparsity patterns of the derivatives. This process works well
in many cases; however, in some cases this method is unreliable for finding the sparsity pattern.
(For example, if a C, C++, or Fortran function is called from Python, the <code class="docutils literal notranslate"><span class="pre">nan</span></code> values may not
propagate through the function call as expected.) In these cases, the “central-difference-full”
method can be used, which calculates all the derivatives by central difference, without
attempting to find the sparsity pattern. This method is slower than the “central-difference”
method but is more reliable.</p></li>
<li><p>“user”, in which case the user must supply the first and perhaps second derivatives.</p></li>
</ul>
<p>It’s usually best to use the “auto” method, as it is typically faster and more accurate than the
central difference methods. If central difference methods are required because the casadi package
is unable to calculate the derivatives, it is safer (but slower) to start with the
“central-difference-full” method. Once the problem is working, the “central-difference” method can
be tried to see if it produces the same solution.</p>
</section>
<section id="the-derivatives-order-attribute">
<h2>The <code class="docutils literal notranslate"><span class="pre">derivatives.order</span></code> Attribute<a class="headerlink" href="#the-derivatives-order-attribute" title="Link to this heading"></a></h2>
<p>Users can also choose whether YAPSS calculates first or second derivatives. The
<code class="docutils literal notranslate"><span class="pre">derivatives.order</span></code> option can take on one of two values, “first” or “second”. When using
automatic differentiation, it’s almost always better to use “second”. When using the central
difference method, it can sometimes be advantageous to use only first-order derivatives, because
taking second derivatives is computationally expensive, and numerical second derivatives are
less accurate than numerical first derivatives.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h2>
<p>Consider the minimum time-to-climb problem, where the objective is to minimize the time to climb.
Because tabular data is used to represent the aerodynamic performance, automatic differentiation
is not an option. So the differentiation method chosen is “central-difference”. Even though
numerical differentiation is used, the derivatives order is set to “second”, as that turns
out to be (a little bit) faster than using first-order derivatives.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">yapss</span> <span class="kn">import</span> <span class="n">Problem</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ocp</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Bryson Minimum Time to Climb"</span><span class="p">,</span> <span class="n">nx</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">nu</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ocp</span><span class="o">.</span><span class="n">derivatives</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s2">"central-difference"</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ocp</span><span class="o">.</span><span class="n">derivatives</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="s2">"second"</span>
</pre></div>
</div>
</section>
<section id="derivatives-class-reference">
<h2><code class="docutils literal notranslate"><span class="pre">Derivatives</span></code> Class Reference<a class="headerlink" href="#derivatives-class-reference" title="Link to this heading"></a></h2>
<p>Below is a complete reference of the <code class="docutils literal notranslate"><span class="pre">Derivatives</span></code> class attributes.</p>
<dl class="py class">
<dt class="sig sig-object py" id="yapss._private.problem.Derivatives">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Derivatives</span></span><a class="reference internal" href="../_modules/yapss/_private/problem.html#Derivatives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#yapss._private.problem.Derivatives" title="Link to this definition"></a></dt>
<dd><p>Derivative class.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>method</strong><span class="classifier">{“auto”, “central-difference”, “central-difference-full”, “user”}</span></dt><dd></dd>
<dt><strong>order</strong><span class="classifier">{“first”, “second”}</span></dt><dd></dd>
</dl>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="yapss._private.problem.Derivatives.method">
<span class="sig-name descname"><span class="pre">method</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LimitOptions</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#yapss._private.problem.Derivatives.method" title="Link to this definition"></a></dt>
<dd><p>Method used to compute derivatives.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="yapss._private.problem.Derivatives.order">
<span class="sig-name descname"><span class="pre">order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LimitOptions</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#yapss._private.problem.Derivatives.order" title="Link to this definition"></a></dt>
<dd><p>Order of derivatives used in search for optimum.</p>
</dd></dl>
</dd></dl>
</section>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="guess.html" rel="prev" title="Initial Guess"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="user_derivatives.html" rel="next" title="User-Defined Derivatives">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright 2021-2024 MIT.
      <span class="lastupdated">Last updated on Dec 29, 2024.
      </span></p>
</div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
</body>
</html>